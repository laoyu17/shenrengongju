# 开发评估与 SimPy 集成思考

## 1. 选择 SimPy 的理由
- 离散事件仿真模型成熟，适合调度与资源争用场景
- 进程式协程模型易于表达任务/分段执行与阻塞
- 生态简洁，便于二次封装与可视化集成

## 2. 架构设计中如何利用 SimPy
- **Environment 作为全局时间基准**：统一事件推进
- **Task/Segment 作为进程**：每个分段用协程表达可抢占执行
- **资源访问建模**：Resource/PreemptiveResource 或自定义协议封装
- **调度器驱动**：调度器只产出“决策”，引擎负责执行
- **事件日志统一出口**：SimPy 事件点记录日志，用于可视化与统计

## 3. 开发可行性与风险评估
- **可行性**：SimPy 对离散事件、阻塞、资源互斥天然支持，能满足核心调度仿真逻辑
- **风险**：
  - 分段级抢占与迁移复杂，可能需要自定义调度器与事件调度机制
  - 事件粒度细导致性能压力，需使用统计聚合与采样

## 4. 开发阶段建议
- **阶段 1（MVP）**：单 DAG + 分段 + 单资源 + 简单调度 + Gantt
- **阶段 2**：多核异构 + 资源绑定 + 抢占/迁移统计
- **阶段 3**：混合实时性 + 策略对比 + 指标导出

## 5. 成本与收益权衡
- **收益**：快速迭代仿真逻辑，调度策略验证周期缩短
- **成本**：复杂调度语义需额外建模，可能增加维护成本

## 6. 工程落地建议
- 调度策略、资源协议、ETM 插件化，避免内核膨胀
- 日志与指标独立管道，支持 GUI 与离线分析
